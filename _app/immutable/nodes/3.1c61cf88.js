import{_ as Qe}from"../chunks/preload-helper.41c905a7.js";import{S as Pe,i as Se,s as De,k as N,q as Z,a as X,l as A,m as j,r as K,h,c as H,n as p,b as w,G as O,u as he,H as R,I as Q,o as Ge,R as x,L as Ae,M as Y,T as Jt,N as ye,j as jt,U as Mt,e as z,J as Le,V as Ce,W as Oe,w as Ee,K as Ve,g as V,v as re,d as F,f as ae,y as pe,z as ge,A as be,B as ve,X as Ie,Y as we,Z as qe,_ as Zt,O as Kt,p as Qt}from"../chunks/index.7c5e5199.js";import{u as le,p as _e,t as Rt,l as $t,a as Ye,i as Re,c as xt}from"../chunks/setup.6ba897b6.js";import{w as me,e as Ct}from"../chunks/singletons.7d92880d.js";import{p as el}from"../chunks/stores.f525dd24.js";const tl=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/albert.md":()=>Qe(()=>import("../chunks/albert.8817ba32.js"),["../chunks/albert.8817ba32.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/schiller.md":()=>Qe(()=>import("../chunks/schiller.c55ef3e3.js"),["../chunks/schiller.c55ef3e3.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,i])=>{const n=await i(),{html:r}=n.default.render(),a=t.slice(17,-3),o=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,u=[...r.matchAll(o)].map(d=>d[2]).filter(d=>!d.startsWith("http")).map(d=>{const f=d.lastIndexOf("/");return f!==-1?d.substring(f+1):d});return{meta:n.metadata,path:a,text:r,links:u}}))},ll=async({fetch:s})=>({posts:await(await s("/api/posts")).json()}),sl=async()=>(await tl()).sort().map(l=>({slug:l.path.replaceAll("/","")})),ss=Object.freeze(Object.defineProperty({__proto__:null,entries:sl,load:ll},Symbol.toStringTag,{value:"Module"})),Ze=me(""),ze=me(""),Te=me(!1),Ue=me([]),de=me([]),je=me([]),Me=me(0);function $e(s){var i;let e,l=((i=s[0].meta)==null?void 0:i.description)+"",t;return{c(){e=N("div"),t=Z(l),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=j(e);t=K(r,l),r.forEach(h),this.h()},h(){p(e,"class","description svelte-rrhrf8")},m(n,r){w(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=((a=n[0].meta)==null?void 0:a.description)+"")&&he(t,l)},d(n){n&&h(e)}}}function xe(s){let e,l=s[0].meta.author+"",t;return{c(){e=N("div"),t=Z(l),this.h()},l(i){e=A(i,"DIV",{class:!0});var n=j(e);t=K(n,l),n.forEach(h),this.h()},h(){p(e,"class","author svelte-rrhrf8")},m(i,n){w(i,e,n),O(e,t)},p(i,n){n&1&&l!==(l=i[0].meta.author+"")&&he(t,l)},d(i){i&&h(e)}}}function et(s){var n;let e,l,t=((n=new Date(s[0].meta.date))==null?void 0:n.toLocaleDateString(s[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"",i;return{c(){e=N("div"),l=N("div"),i=Z(t),this.h()},l(r){e=A(r,"DIV",{class:!0});var a=j(e);l=A(a,"DIV",{class:!0});var o=j(l);i=K(o,t),o.forEach(h),a.forEach(h),this.h()},h(){p(l,"class","date svelte-rrhrf8"),p(e,"class","date svelte-rrhrf8")},m(r,a){w(r,e,a),O(e,l),O(l,i)},p(r,a){var o;a&1&&t!==(t=((o=new Date(r[0].meta.date))==null?void 0:o.toLocaleDateString(r[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"")&&he(i,t)},d(r){r&&h(e)}}}function il(s){var S,E,M;let e,l,t,i,n=s[0].meta.title+"",r,a,o,u,d,f,g,c=((S=s[0].meta)==null?void 0:S.description)&&$e(s),v=((E=s[0].meta)==null?void 0:E.author)&&xe(s),b=((M=s[0].meta)==null?void 0:M.date)&&et(s);return{c(){e=N("a"),l=Z("← Index"),t=X(),i=N("h1"),r=Z(n),a=X(),c&&c.c(),o=X(),u=N("div"),v&&v.c(),d=X(),b&&b.c(),f=X(),g=N("div"),this.h()},l(_){e=A(_,"A",{href:!0,class:!0,rel:!0});var y=j(e);l=K(y,"← Index"),y.forEach(h),t=H(_),i=A(_,"H1",{class:!0});var P=j(i);r=K(P,n),P.forEach(h),a=H(_),c&&c.l(_),o=H(_),u=A(_,"DIV",{class:!0});var m=j(u);v&&v.l(m),d=H(m),b&&b.l(m),m.forEach(h),f=H(_),g=A(_,"DIV",{class:!0});var k=j(g);k.forEach(h),this.h()},h(){p(e,"href",Ct+"/"),p(e,"class","index svelte-rrhrf8"),p(e,"rel","noopener noreferrer"),p(i,"class","svelte-rrhrf8"),p(u,"class","metadata svelte-rrhrf8"),p(g,"class","markdown svelte-rrhrf8")},m(_,y){w(_,e,y),O(e,l),w(_,t,y),w(_,i,y),O(i,r),w(_,a,y),c&&c.m(_,y),w(_,o,y),w(_,u,y),v&&v.m(u,null),O(u,d),b&&b.m(u,null),w(_,f,y),w(_,g,y),g.innerHTML=s[1]},p(_,[y]){var P,m,k;y&1&&n!==(n=_[0].meta.title+"")&&he(r,n),(P=_[0].meta)!=null&&P.description?c?c.p(_,y):(c=$e(_),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null),(m=_[0].meta)!=null&&m.author?v?v.p(_,y):(v=xe(_),v.c(),v.m(u,d)):v&&(v.d(1),v=null),(k=_[0].meta)!=null&&k.date?b?b.p(_,y):(b=et(_),b.c(),b.m(u,null)):b&&(b.d(1),b=null)},i:R,o:R,d(_){_&&h(e),_&&h(t),_&&h(i),_&&h(a),c&&c.d(_),_&&h(o),_&&h(u),v&&v.d(),b&&b.d(),_&&h(f),_&&h(g)}}}const nl=/\[\^([^\]]+)\]/g;let rl=100;function al(s){const e=s.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),s.currentTarget.classList.add("hover")}function ol(s){const e=s.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),s.currentTarget.classList.remove("hover")}function fl(s,e,l){const t=l-e;return(s-e)/t*100}function ul(s,e,l){const t=l-e;return e+t*s/100}function cl(s,e,l){let t,i;Q(s,Te,_=>l(8,t=_)),Q(s,Ze,_=>l(9,i=_));let{data:n}=e,{items:r}=e,{scrollTopVal:a}=e,o=n.text,u=1;const f=o.replace(/<a\s+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,(_,y,P)=>{if(y.startsWith("http")&!y.startsWith(le))return`<a class="external" target="_blank" href="${y}" title="${P}">${P}</a>`;{let m=y;return`<a class="node-highlite" unique-id="${m}" id="${y}"
				data-id="${y}" title="${P}">${P}
				<span class="symbol node" unique-id="${m}" data-id="item_${y}"
				data-class="${r.filter(k=>k.label==P).map(k=>{var L,B;return(B=(L=k.data)==null?void 0:L["@type"])==null?void 0:B[1]})}">
					</span></a>`}}).replace(nl,(_,y)=>{const P=u++;return`<sup id="fn-${P}"><a href="#fnref-${P}">${P}</a></sup><span id="fn-${P}-content">${y}</span>`}),g=Array.from({length:u-1},(_,y)=>{var k;const P=y+1,m=(k=f.match(new RegExp(`<span id="fn-${P}-content">([^<]+)</span>`)))==null?void 0:k[1];return`<li id="fnref-${P}"> ${m}</li>`}).join(""),c=`${f}
	<ol class="biblio">${g}</ol>`;let v;Ge(async()=>{l(4,v=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),S(v),v.forEach(_=>{_.addEventListener("mouseenter",al),_.addEventListener("mouseleave",ol),_.addEventListener("click",b)})});function b(_){v.forEach(m=>{const k=m.getAttribute("data-id"),L=document.querySelector(`.node[data-id="${k}"]`);L&&L.classList.remove("clicked"),m.classList.remove("clicked")});const y=_.currentTarget.getAttribute("data-id"),P=document.querySelector(`.node[data-id="${y}"]`);P&&P.classList.toggle("clicked"),_.currentTarget.classList.toggle("clicked"),x(Ze,i=y,i)}function S(_){let y=null;l(4,v=Array.from(_).map(P=>{let m=P.offsetTop;return y!==null&&m<=y?P.adjustedOffsetTop=y+rl:P.adjustedOffsetTop=m,y=P.adjustedOffsetTop,P}))}let E=0;function M(_,y){var P,m,k,L,B,W;if(!t){let U=(P=_==null?void 0:_[E])==null?void 0:P.adjustedOffsetTop,T=(m=_==null?void 0:_[E+1])==null?void 0:m.adjustedOffsetTop,J=(k=_==null?void 0:_[E])==null?void 0:k.getAttribute("data-id"),ne=(L=_==null?void 0:_[E+1])==null?void 0:L.getAttribute("data-id"),C=(B=document.querySelector(`.node[data-id="${J}"]`))==null?void 0:B.offsetTop,se=(W=document.querySelector(`.node[data-id="${ne}"]`))==null?void 0:W.offsetTop,te=fl(y,U,T),D=ul(te,C,se);y>T&&E++,y<U&&E!=0&&E--;const q=document.querySelector(".links:first-of-type");U&&T&&q&&te&&D&&(q==null||q.scrollTo({top:D}))}}return s.$$set=_=>{"data"in _&&l(0,n=_.data),"items"in _&&l(2,r=_.items),"scrollTopVal"in _&&l(3,a=_.scrollTopVal)},s.$$.update=()=>{s.$$.dirty&24&&M(v,a)},[n,c,r,a,v]}class dl extends Pe{constructor(e){super(),Se(this,e,cl,il,De,{data:0,items:2,scrollTopVal:3})}}const Be=me([]);async function _l(){try{const s=await fetch(`${Ct}/db.json`);if(!s.ok)throw new Error(`Failed to load db.json: ${s.statusText}`);const e=await s.json();Be.set(e.map(l=>{var t,i,n;return{...l,"@id":(n=(i=(t=l["@id"])==null?void 0:t.replace(/\/items\//,"/resources/"))==null?void 0:i.replace(/\/media\//,"/resources/"))==null?void 0:n.replace(/\/item_sets\//,"/resources/")}}))}catch(s){console.error("Error loading db.json:",s)}}var hl=0;function ml(){return++hl}var Ke=Function("return this")();typeof Ke.__nextId!="function"&&(Ke.__nextId=ml);function Vt(){return"uid-"+Ke.__nextId()}async function pl(s,e){const l=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,t=[];let i;for(;i=l.exec(s);)if(!(i[2].includes("http")&&!i[2].includes(le))){const a=i[3],o=i[2];t.push({label:a,id:o,url:o,data:[]})}const n=t.filter(a=>a.url).map(a=>a.id);let r=[...gl(n,e)];for(let a=0;a<t.length;a++){const o=t.find(d=>{var f;return(f=r[a])==null?void 0:f["@id"].includes(d.id)}),u=r[a];o&&(o.uniqueId=Vt(),o.data=u)}return t}function gl(s,e,l){return e.filter(t=>{const i=t["@id"];return s.includes(i)}).map(t=>{var i,n,r;return t["@id"]=(r=(n=(i=t["@id"])==null?void 0:i.replace(/\/items\//,"/resources/"))==null?void 0:n.replace(/\/media\//,"/resources/"))==null?void 0:r.replace(/\/item_sets\//,"/resources/"),t})}async function qt(s){let e=[];for(let t=0;t<s.length;t++)if(s[t].data){let i=s[t].data,n=s[t].set||null,r=bl(i,n);e=[...e,...r]}return{...{nodes:e.reduce((t,i)=>(t.find(n=>n.id===i.source)||t.push({id:i.source,title:i.title}),t.find(n=>n.id===i.target)||t.push({id:i.target,title:i.title}),t),[]),links:e}}}function bl(s,e){let l=[],t=s["@id"];e&&l.push({source:e["@id"],target:t,img:Fe(s,_e.img.join(".")),title:s[Rt]});let i,n=!1;const r=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/,a=function(o){var u,d,f,g;for(let c in o)if(c==="@id"||c==="@value"&&(o[_e.title]||o.display_title||o["@id"]||n)){let v=o["@id"];v=v==null?void 0:v.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/");const b=o[_e.title]||o.display_title||o["@id"],S=(o==null?void 0:o.thumbnail_url)||Fe(o,_e.img.join("."));let E=((d=(u=o[void 0])==null?void 0:u.replace("_"," "))==null?void 0:d.replace(r,""))||(i==null?void 0:i.replace(r,""));l.some(_=>_.source===t&&_.target===v)||l.push({source:t,target:v,title:b,img:S,property:E,reverse:n,external:!v.includes(le)})}else typeof o[c]=="object"&&(isNaN(c)&&(i=(g=(f=(c==null?void 0:c.split(":"))[1])==null?void 0:f.split("_"))==null?void 0:g.join(" "),c==="@reverse"&&(n=!0)),a(o[c]))};return a(s),l}function Fe(s,e){return e.split(".").reduce((l,t)=>(l||{})[t],s)}function tt(s,e,l){const t=s.slice();return t[27]=e[l],t}function vl(s){var i;let e,l=(((i=s[0].title)==null?void 0:i.replace(le,""))||"")+"",t;return{c(){e=N("div"),t=Z(l),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=j(e);t=K(r,l),r.forEach(h),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){w(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=(((a=n[0].title)==null?void 0:a.replace(le,""))||"")+"")&&he(t,l)},d(n){n&&h(e)}}}function kl(s){let e,l,t,i,n,r,a,o=s[0].title&&lt(s);return{c(){e=N("img"),i=X(),o&&o.c(),n=z(),this.h()},l(u){e=A(u,"IMG",{src:!0,alt:!0,class:!0}),i=H(u),o&&o.l(u),n=z(),this.h()},h(){Ve(e.src,l=s[5])||p(e,"src",l),p(e,"alt",t=s[0].title),p(e,"class","svelte-189mvtg")},m(u,d){w(u,e,d),w(u,i,d),o&&o.m(u,d),w(u,n,d),r||(a=[Y(e,"load",s[11]),Y(e,"error",zt)],r=!0)},p(u,d){d&32&&!Ve(e.src,l=u[5])&&p(e,"src",l),d&1&&t!==(t=u[0].title)&&p(e,"alt",t),u[0].title?o?o.p(u,d):(o=lt(u),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(u){u&&h(e),u&&h(i),o&&o.d(u),u&&h(n),r=!1,ye(a)}}}function yl(s){let e,l,t,i,n,r,a,o=s[0].title&&st(s);return{c(){e=N("img"),i=X(),o&&o.c(),n=z(),this.h()},l(u){e=A(u,"IMG",{src:!0,alt:!0,class:!0}),i=H(u),o&&o.l(u),n=z(),this.h()},h(){Ve(e.src,l=s[0].img.replace("square","large"))||p(e,"src",l),p(e,"alt",t=s[0].title),p(e,"class","svelte-189mvtg")},m(u,d){w(u,e,d),w(u,i,d),o&&o.m(u,d),w(u,n,d),r||(a=[Y(e,"load",s[11]),Y(e,"error",zt)],r=!0)},p(u,d){d&1&&!Ve(e.src,l=u[0].img.replace("square","large"))&&p(e,"src",l),d&1&&t!==(t=u[0].title)&&p(e,"alt",t),u[0].title?o?o.p(u,d):(o=st(u),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(u){u&&h(e),u&&h(i),o&&o.d(u),u&&h(n),r=!1,ye(a)}}}function lt(s){var i;let e,l=(((i=s[0].title)==null?void 0:i.replace(le,""))||"")+"",t;return{c(){e=N("div"),t=Z(l),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=j(e);t=K(r,l),r.forEach(h),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){w(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=(((a=n[0].title)==null?void 0:a.replace(le,""))||"")+"")&&he(t,l)},d(n){n&&h(e)}}}function st(s){var i;let e,l=((i=s[0].title)==null?void 0:i.replace(le,""))+"",t;return{c(){e=N("div"),t=Z(l),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=j(e);t=K(r,l),r.forEach(h),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){w(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=((a=n[0].title)==null?void 0:a.replace(le,""))+"")&&he(t,l)},d(n){n&&h(e)}}}function it(s){let e,l=s[8].essays,t=[];for(let i=0;i<l.length;i+=1)t[i]=nt(tt(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=z()},l(i){for(let n=0;n<t.length;n+=1)t[n].l(i);e=z()},m(i,n){for(let r=0;r<t.length;r+=1)t[r].m(i,n);w(i,e,n)},p(i,n){if(n&256){l=i[8].essays;let r;for(r=0;r<l.length;r+=1){const a=tt(i,l,r);t[r]?t[r].p(a,n):(t[r]=nt(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){Le(t,i),i&&h(e)}}}function nt(s){let e,l,t,i=s[27].title+"",n,r;return{c(){e=N("a"),l=Z("→"),t=N("em"),n=Z(i),this.h()},l(a){e=A(a,"A",{class:!0,href:!0,target:!0,rel:!0});var o=j(e);l=K(o,"→"),t=A(o,"EM",{});var u=j(t);n=K(u,i),u.forEach(h),o.forEach(h),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",r=s[27].url),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(a,o){w(a,e,o),O(e,l),O(e,t),O(t,n)},p(a,o){o&256&&i!==(i=a[27].title+"")&&he(n,i),o&256&&r!==(r=a[27].url)&&p(e,"href",r)},d(a){a&&h(e)}}}function rt(s){let e;function l(n,r){return n[0].title==null||n[0].title.length==1?wl:Il}let t=l(s),i=t(s);return{c(){i.c(),e=z()},l(n){i.l(n),e=z()},m(n,r){i.m(n,r),w(n,e,r)},p(n,r){t===(t=l(n))&&i?i.p(n,r):(i.d(1),i=t(n),i&&(i.c(),i.m(e.parentNode,e)))},d(n){i.d(n),n&&h(e)}}}function Il(s){let e,l,t;return{c(){e=N("a"),l=Z("→ Metadata"),this.h()},l(i){e=A(i,"A",{class:!0,href:!0,target:!0,rel:!0});var n=j(e);l=K(n,"→ Metadata"),n.forEach(h),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",t=`${s[3]}/item/${s[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(i,n){w(i,e,n),O(e,l)},p(i,n){n&24&&t!==(t=`${i[3]}/item/${i[4]}`)&&p(e,"href",t)},d(i){i&&h(e)}}}function wl(s){let e,l,t;return{c(){e=N("a"),l=Z("→ Metadata"),this.h()},l(i){e=A(i,"A",{class:!0,href:!0,target:!0,rel:!0});var n=j(e);l=K(n,"→ Metadata"),n.forEach(h),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",t=`${s[3]}/media/${s[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(i,n){w(i,e,n),O(e,l)},p(i,n){n&24&&t!==(t=`${i[3]}/media/${i[4]}`)&&p(e,"href",t)},d(i){i&&h(e)}}}function El(s){let e,l,t,i,n,r;function a(g,c){return g[0].img?yl:g[5]?kl:vl}let o=a(s),u=o(s),d=s[8]!=null&&it(s),f=s[3]&&rt(s);return{c(){e=N("div"),u.c(),l=X(),d&&d.c(),t=X(),f&&f.c(),this.h()},l(g){e=A(g,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var c=j(e);u.l(c),l=H(c),d&&d.l(c),t=H(c),f&&f.l(c),c.forEach(h),this.h()},h(){p(e,"class","node svelte-189mvtg"),p(e,"title",i=s[0].title),p(e,"source",s[9]),p(e,"target",s[4]),p(e,"data-id",s[4]),Ae(e,"selected",s[7]),Ae(e,"linkToEssay",s[8]!=null)},m(g,c){w(g,e,c),u.m(e,null),O(e,l),d&&d.m(e,null),O(e,t),f&&f.m(e,null),s[20](e),n||(r=[Y(e,"mouseover",s[21]),Y(e,"mouseleave",function(){Jt(s[13](s[4]))&&s[13](s[4]).apply(this,arguments)}),Y(e,"click",s[17]),Y(e,"keydown",s[18]),Y(e,"focus",s[19])],n=!0)},p(g,[c]){s=g,o===(o=a(s))&&u?u.p(s,c):(u.d(1),u=o(s),u&&(u.c(),u.m(e,l))),s[8]!=null?d?d.p(s,c):(d=it(s),d.c(),d.m(e,t)):d&&(d.d(1),d=null),s[3]?f?f.p(s,c):(f=rt(s),f.c(),f.m(e,null)):f&&(f.d(1),f=null),c&1&&i!==(i=s[0].title)&&p(e,"title",i),c&512&&p(e,"source",s[9]),c&16&&p(e,"target",s[4]),c&16&&p(e,"data-id",s[4]),c&128&&Ae(e,"selected",s[7]),c&256&&Ae(e,"linkToEssay",s[8]!=null)},i:R,o:R,d(g){g&&h(e),u.d(),d&&d.d(),f&&f.d(),s[20](null),n=!1,ye(r)}}}function zt(s){s.target.style.display="none"}function Pl(s,e,l){let t,i,n,r,a,o,u=R,d=()=>(u(),u=Ce(E,D=>l(23,o=D)),E),f,g=R,c=()=>(g(),g=Ce(M,D=>l(24,f=D)),M),v,b;Q(s,de,D=>l(16,a=D)),Q(s,Ze,D=>l(25,v=D)),Q(s,ze,D=>l(10,b=D)),s.$$.on_destroy.push(()=>u()),s.$$.on_destroy.push(()=>g());let{datum:S}=e,{entities:E}=e;d();let{updatePosition:M}=e;c();let{essaysItems:_}=e,{site:y}=e,{openNode:P}=e,m,k=null;jt(()=>{const D=S.source;D==`item_${v}`&&D!=k&&P(S,1),k=`item_${v}`}),Mt(()=>{x(M,f=!0,f)});function L(){x(M,f=!0,f)}function B(D){const q=D,$=o.find(oe=>oe["@id"]==q);return Fe($,_e.img.join("."))}let W;function U(D){const q=D,$=document.querySelector(`.node-highlite[data-id="${q}"]`);$&&$.classList.add("hover"),W.classList.add("hover")}function T(D){const q=D,$=document.querySelector(`.node-highlite[data-id="${q}"]`);$&&$.classList.remove("hover"),W.classList.remove("hover")}function J(D){Oe.call(this,s,D)}function ne(D){Oe.call(this,s,D)}function C(D){Oe.call(this,s,D)}function se(D){Ee[D?"unshift":"push"](()=>{W=D,l(6,W)})}const te=()=>{x(ze,b=i,b),U(i)};return s.$$set=D=>{"datum"in D&&l(0,S=D.datum),"entities"in D&&d(l(1,E=D.entities)),"updatePosition"in D&&c(l(2,M=D.updatePosition)),"essaysItems"in D&&l(14,_=D.essaysItems),"site"in D&&l(3,y=D.site),"openNode"in D&&l(15,P=D.openNode)},s.$$.update=()=>{s.$$.dirty&1&&l(5,m=B(S.target)),s.$$.dirty&1&&l(9,t=S==null?void 0:S.source),s.$$.dirty&1&&l(4,i=S==null?void 0:S.target),s.$$.dirty&16400&&l(8,n=_.find(D=>D.id==i)),s.$$.dirty&65537&&l(7,r=a.some(D=>(D==null?void 0:D.id)==S.target))},[S,E,M,y,i,m,W,r,n,t,b,L,U,T,_,P,a,J,ne,C,se,te]}class Ft extends Pe{constructor(e){super(),Se(this,e,Pl,El,De,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}function Sl(s){let e,l,t;return{c(){e=N("div"),this.h()},l(i){e=A(i,"DIV",{source:!0,target:!0}),j(e).forEach(h),this.h()},h(){p(e,"source",l=s[0].source),p(e,"target",t=s[0].target)},m(i,n){w(i,e,n),s[8](e)},p(i,[n]){n&1&&l!==(l=i[0].source)&&p(e,"source",l),n&1&&t!==(t=i[0].target)&&p(e,"target",t)},i:R,o:R,d(i){i&&h(e),s[8](null)}}}let at=0;function Dl(s,e,l){let t,i,n,r,a=R,o=()=>(a(),a=Ce(c,_=>l(5,r=_)),c),u,d;Q(s,je,_=>l(12,n=_)),Q(s,Me,_=>l(6,u=_)),Q(s,de,_=>l(7,d=_)),s.$$.on_destroy.push(()=>a());let{datum:f}=e,{label:g}=e,{updatePosition:c}=e;o();let v,b=Vt();Ge(()=>{E()});function S(_,y=0,P){const m=_,k=[...document.querySelectorAll(`.node[data-id="${m}"]`)],L=[];return k.forEach(B=>{const W=B.getBoundingClientRect(),U={x:W.x+u,y:W.y+y,width:W.width-y/2,height:W.height,selected:"selected"};L.push(U)}),L}function E(){delete n[b],x(c,r=!1,r);const _=S(f.source,at),y=S(f.target,at);v&&(v.getBoundingClientRect().x,v.getBoundingClientRect().y),_.forEach(P=>{y.forEach(m=>{let k=100;const L=P==null?void 0:P.selected;let B,W,U,T,J;B=P.x+P.width,W=P.y,U=m.x,T=m.y,m.x<P.x||m.x==P.x?J=m.x-k*5:m.x==P.x?J=m.x-k*3:J=m.x-k,f.source.includes("item_")&&(J=m.x-k);const ne=B+k,C=W,se=m.y,te=`M${B},${W}C${ne},${C} ${J},${se} ${U},${T}`;x(je,n[b]=n[b]||[],n),n[b].push({class:i,d:te,label:g,selected:L,datum:{source:f.source,target:f.target},reverse:f==null?void 0:f.reverse})})})}Mt(()=>{delete n[b],x(je,n=[],n)});function M(_){Ee[_?"unshift":"push"](()=>{v=_,l(2,v)})}return s.$$set=_=>{"datum"in _&&l(0,f=_.datum),"label"in _&&l(3,g=_.label),"updatePosition"in _&&o(l(1,c=_.updatePosition))},s.$$.update=()=>{s.$$.dirty&96&&E(),s.$$.dirty&128&&l(4,t=d.slice(-1)[0].id),s.$$.dirty&17&&(i=f.target==t||f.source==t?"highlite":"")},[f,c,v,g,t,r,u,d,M]}class Gt extends Pe{constructor(e){super(),Se(this,e,Dl,Sl,De,{datum:0,label:3,updatePosition:1})}}new TextEncoder;function ot(s,e,l){const t=s.slice();return t[23]=e[l],t}function ft(s){let e,l;return{c(){e=N("div"),l=Z("Loading..."),this.h()},l(t){e=A(t,"DIV",{class:!0});var i=j(e);l=K(i,"Loading..."),i.forEach(h),this.h()},h(){p(e,"class","loading svelte-1kyenid")},m(t,i){w(t,e,i),O(e,l)},d(t){t&&h(e)}}}function ut(s){let e,l,t=s[0],i=[];for(let r=0;r<t.length;r+=1)i[r]=dt(ot(s,t,r));const n=r=>F(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=z()},l(r){for(let a=0;a<i.length;a+=1)i[a].l(r);e=z()},m(r,a){for(let o=0;o<i.length;o+=1)i[o].m(r,a);w(r,e,a),l=!0},p(r,a){if(a&639){t=r[0];let o;for(o=0;o<t.length;o+=1){const u=ot(r,t,o);i[o]?(i[o].p(u,a),V(i[o],1)):(i[o]=dt(u),i[o].c(),V(i[o],1),i[o].m(e.parentNode,e))}for(re(),o=t.length;o<i.length;o+=1)n(o);ae()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)V(i[a]);l=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)F(i[a]);l=!1},d(r){Le(i,r),r&&h(e)}}}function Tl(s){var t,i;let e,l;return e=new Gt({props:{datum:s[23],updatePosition:s[3],label:((i=(t=s[23])==null?void 0:t.property)==null?void 0:i.replace(le,""))||""}}),{c(){pe(e.$$.fragment)},l(n){ge(e.$$.fragment,n)},m(n,r){be(e,n,r),l=!0},p(n,r){var o,u;const a={};r&1&&(a.datum=n[23]),r&8&&(a.updatePosition=n[3]),r&1&&(a.label=((u=(o=n[23])==null?void 0:o.property)==null?void 0:u.replace(le,""))||""),e.$set(a)},i(n){l||(V(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){ve(e,n)}}}function Ll(s){let e,l,t=s[23].target&&s[23].source!=s[23].target&&ct(s);return{c(){t&&t.c(),e=z()},l(i){t&&t.l(i),e=z()},m(i,n){t&&t.m(i,n),w(i,e,n),l=!0},p(i,n){i[23].target&&i[23].source!=i[23].target?t?(t.p(i,n),n&1&&V(t,1)):(t=ct(i),t.c(),V(t,1),t.m(e.parentNode,e)):t&&(re(),F(t,1,1,()=>{t=null}),ae())},i(i){l||(V(t),l=!0)},o(i){F(t),l=!1},d(i){t&&t.d(i),i&&h(e)}}}function ct(s){var u,d;let e,l,t,i,n;const r=[Al,Nl],a=[];function o(f,g){var c;return(c=f[23])!=null&&c.external?1:0}return e=o(s),l=a[e]=r[e](s),i=new Gt({props:{datum:s[23],updatePosition:s[3],label:((d=(u=s[23])==null?void 0:u.property)==null?void 0:d.replace(le,""))||""}}),{c(){l.c(),t=X(),pe(i.$$.fragment)},l(f){l.l(f),t=H(f),ge(i.$$.fragment,f)},m(f,g){a[e].m(f,g),w(f,t,g),be(i,f,g),n=!0},p(f,g){var b,S;let c=e;e=o(f),e===c?a[e].p(f,g):(re(),F(a[c],1,1,()=>{a[c]=null}),ae(),l=a[e],l?l.p(f,g):(l=a[e]=r[e](f),l.c()),V(l,1),l.m(t.parentNode,t));const v={};g&1&&(v.datum=f[23]),g&8&&(v.updatePosition=f[3]),g&1&&(v.label=((S=(b=f[23])==null?void 0:b.property)==null?void 0:S.replace(le,""))||""),i.$set(v)},i(f){n||(V(l),V(i.$$.fragment,f),n=!0)},o(f){F(l),F(i.$$.fragment,f),n=!1},d(f){a[e].d(f),f&&h(t),ve(i,f)}}}function Nl(s){let e,l,t,i;return l=new Ft({props:{site:s[6],entities:s[2],updatePosition:s[3],datum:s[23],essaysItems:s[5],openNode:s[9]}}),{c(){e=N("a"),pe(l.$$.fragment),this.h()},l(n){e=A(n,"A",{href:!0,target:!0,rel:!0});var r=j(e);ge(l.$$.fragment,r),r.forEach(h),this.h()},h(){p(e,"href",t=s[23].target),p(e,"target","_blank"),p(e,"rel","noreferrer")},m(n,r){w(n,e,r),be(l,e,null),i=!0},p(n,r){const a={};r&64&&(a.site=n[6]),r&4&&(a.entities=n[2]),r&8&&(a.updatePosition=n[3]),r&1&&(a.datum=n[23]),r&32&&(a.essaysItems=n[5]),l.$set(a),(!i||r&1&&t!==(t=n[23].target))&&p(e,"href",t)},i(n){i||(V(l.$$.fragment,n),i=!0)},o(n){F(l.$$.fragment,n),i=!1},d(n){n&&h(e),ve(l)}}}function Al(s){let e,l;function t(){return s[16](s[23])}function i(){return s[17](s[23])}return e=new Ft({props:{site:s[6],entities:s[2],updatePosition:s[3],datum:s[23],essaysItems:s[5],openNode:s[9]}}),e.$on("click",t),e.$on("keydown",i),{c(){pe(e.$$.fragment)},l(n){ge(e.$$.fragment,n)},m(n,r){be(e,n,r),l=!0},p(n,r){s=n;const a={};r&64&&(a.site=s[6]),r&4&&(a.entities=s[2]),r&8&&(a.updatePosition=s[3]),r&1&&(a.datum=s[23]),r&32&&(a.essaysItems=s[5]),e.$set(a)},i(n){l||(V(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){ve(e,n)}}}function dt(s){let e,l,t,i,n;function r(...d){return s[15](s[23],...d)}const a=[Ll,Tl],o=[];function u(d,f){return f&3&&(e=null),e==null&&(e=!!d[1].some(r)),e?0:d[23].source&&d[23].target&&d[23].source!=d[23].target?1:-1}return~(l=u(s,-1))&&(t=o[l]=a[l](s)),{c(){t&&t.c(),i=z()},l(d){t&&t.l(d),i=z()},m(d,f){~l&&o[l].m(d,f),w(d,i,f),n=!0},p(d,f){s=d;let g=l;l=u(s,f),l===g?~l&&o[l].p(s,f):(t&&(re(),F(o[g],1,1,()=>{o[g]=null}),ae()),~l?(t=o[l],t?t.p(s,f):(t=o[l]=a[l](s),t.c()),V(t,1),t.m(i.parentNode,i)):t=null)},i(d){n||(V(t),n=!0)},o(d){F(t),n=!1},d(d){~l&&o[l].d(d),d&&h(i)}}}function Ol(s){let e,l,t,i=s[0]&&typeof s[0]=="object"&&Object.keys(s[0]).length>0,n,r=s[8]&&ft(),a=i&&ut(s);return{c(){e=N("section"),r&&r.c(),l=X(),t=N("div"),a&&a.c()},l(o){e=A(o,"SECTION",{});var u=j(e);r&&r.l(u),l=H(u),t=A(u,"DIV",{});var d=j(t);a&&a.l(d),d.forEach(h),u.forEach(h)},m(o,u){w(o,e,u),r&&r.m(e,null),O(e,l),O(e,t),a&&a.m(t,null),s[18](e),n=!0},p(o,[u]){o[8]?r||(r=ft(),r.c(),r.m(e,l)):r&&(r.d(1),r=null),u&1&&(i=o[0]&&typeof o[0]=="object"&&Object.keys(o[0]).length>0),i?a?(a.p(o,u),u&1&&V(a,1)):(a=ut(o),a.c(),V(a,1),a.m(t,null)):a&&(re(),F(a,1,1,()=>{a=null}),ae())},i(o){n||(V(a),n=!0)},o(o){F(a),n=!1},d(o){o&&h(e),r&&r.d(),a&&a.d(),s[18](null)}}}function jl(s){let e=document.querySelector(`#col_${s}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function Ml(s,e){return e.filter(l=>!s.some(t=>t.target===l.target||t.id===l.target))}function Cl(s,e,l){let t,i=R,n=()=>(i(),i=Ce(c,T=>l(20,t=T)),c),r,a;Q(s,de,T=>l(21,r=T)),Q(s,Be,T=>l(22,a=T)),s.$$.on_destroy.push(()=>i());let{category:o}=e,{data:u}=e,{newData:d}=e,{dataLen:f}=e,{entities:g}=e,{updatePosition:c}=e;n();let{index:v}=e,{loadData:b}=e,{defaultNodes:S}=e,{batchSize:E}=e,{essaysItems:M}=e,{site:_}=e,y,P,m={nodes:[],links:[]};async function k(T,J){jl(J),l(8,P=!0),r.splice(J,r.length-J);let ne=r.map(q=>q.data).flat();const C=a.find(q=>q["@id"].replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")===T.target.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/"));if(C!=null&&C["o:items"]&&r.length==1){let q=[];C["o:items"]["@id"],a.find(I=>I["@id"].replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")===T.target.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")).forEach(I=>{q.push(I)});let oe=q.map(I=>{var G;return{title:I[_e.title]||((G=I.data)==null?void 0:G["@id"]),"@id":I["@id"],thumbnail_display_urls:getNestedValue(I,_e.img.join("."))}});C.related={...oe}}m=await qt([{data:C}]);let se=m.links.filter(q=>q.source==T.target||q.target==T.target),te=Ml([...S,...ne],se),D=se.slice(0,E);x(de,r[J]={id:T.target,data:se.sort((q,$)=>{if(q.property)return q.property.localeCompare($.property)}),page:0,new:te,paginate:D},r),l(8,P=!1),te.length>0&&b(D,E),x(c,t=!0,t)}const L=(T,J)=>(J==null?void 0:J.title)===T.title,B=T=>{k(T,v+1)},W=T=>{k(T,v+1)};function U(T){Ee[T?"unshift":"push"](()=>{y=T,l(7,y)})}return s.$$set=T=>{"category"in T&&l(10,o=T.category),"data"in T&&l(0,u=T.data),"newData"in T&&l(1,d=T.newData),"dataLen"in T&&l(11,f=T.dataLen),"entities"in T&&l(2,g=T.entities),"updatePosition"in T&&n(l(3,c=T.updatePosition)),"index"in T&&l(4,v=T.index),"loadData"in T&&l(12,b=T.loadData),"defaultNodes"in T&&l(13,S=T.defaultNodes),"batchSize"in T&&l(14,E=T.batchSize),"essaysItems"in T&&l(5,M=T.essaysItems),"site"in T&&l(6,_=T.site)},[u,d,g,c,v,M,_,y,P,k,o,f,b,S,E,L,B,W,U]}class Bt extends Pe{constructor(e){super(),Se(this,e,Cl,Ol,De,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function _t(s,e,l){const t=s.slice();return t[35]=e[l],t[37]=l,t}function Je(s){const e=s.slice(),l=e[35].paginate.filter(i=>!e[3].mainCategories.some(n=>n.props.includes(i.property)));e[38]=l;const t=e[35].data.filter(i=>!e[3].mainCategories.some(n=>n.props.includes(i.property))).length;return e[39]=t,e}function ht(s,e,l){const t=s.slice();t[40]=e[l];const i=t[35].paginate.filter(function(...a){return s[20](t[40],...a)});t[41]=i;const n=t[35].data.filter(function(...a){return s[21](t[40],...a)}).length;return t[39]=n,t}function Vl(s){let e,l,t=s[5],i=[];for(let r=0;r<t.length;r+=1)i[r]=yt(_t(s,t,r));const n=r=>F(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=z()},l(r){for(let a=0;a<i.length;a+=1)i[a].l(r);e=z()},m(r,a){for(let o=0;o<i.length;o+=1)i[o].m(r,a);w(r,e,a),l=!0},p(r,a){if(a[0]&16063){t=r[5];let o;for(o=0;o<t.length;o+=1){const u=_t(r,t,o);i[o]?(i[o].p(u,a),V(i[o],1)):(i[o]=yt(u),i[o].c(),V(i[o],1),i[o].m(e.parentNode,e))}for(re(),o=t.length;o<i.length;o+=1)n(o);ae()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)V(i[a]);l=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)F(i[a]);l=!1},d(r){Le(i,r),r&&h(e)}}}function ql(s){let e,l,t;return{c(){e=N("div"),l=N("h4"),t=Z("Loading Graph..."),this.h()},l(i){e=A(i,"DIV",{});var n=j(e);l=A(n,"H4",{class:!0});var r=j(l);t=K(r,"Loading Graph..."),r.forEach(h),n.forEach(h),this.h()},h(){p(l,"class","loading svelte-4h2tw7")},m(i,n){w(i,e,n),O(e,l),O(l,t)},p:R,i:R,o:R,d(i){i&&h(e)}}}function mt(s){let e,l,t,i=s[35].paginate.filter(s[19]).length>0,n,r,a,o,u,d=s[3].mainCategories,f=[];for(let b=0;b<d.length;b+=1)f[b]=gt(ht(s,d,b));const g=b=>F(f[b],1,1,()=>{f[b]=null});let c=i&&bt(Je(s)),v=s[35].paginate.length<s[35].new.length&&kt(s);return{c(){e=N("div"),l=N("div");for(let b=0;b<f.length;b+=1)f[b].c();t=X(),c&&c.c(),n=X(),v&&v.c(),r=X(),this.h()},l(b){e=A(b,"DIV",{class:!0,id:!0});var S=j(e);l=A(S,"DIV",{});var E=j(l);for(let M=0;M<f.length;M+=1)f[M].l(E);t=H(E),c&&c.l(E),n=H(E),v&&v.l(E),E.forEach(h),S.forEach(h),r=H(b),this.h()},h(){p(e,"class","links svelte-4h2tw7"),p(e,"id","col_"+s[37])},m(b,S){w(b,e,S),O(e,l);for(let E=0;E<f.length;E+=1)f[E].m(l,null);O(l,t),c&&c.m(l,null),O(l,n),v&&v.m(l,null),s[24](e),w(b,r,S),a=!0,o||(u=[Y(e,"scroll",s[25]),Y(e,"click",s[26]),Y(e,"keypress",s[27])],o=!0)},p(b,S){if(S[0]&7725){d=b[3].mainCategories;let E;for(E=0;E<d.length;E+=1){const M=ht(b,d,E);f[E]?(f[E].p(M,S),V(f[E],1)):(f[E]=gt(M),f[E].c(),V(f[E],1),f[E].m(l,t))}for(re(),E=d.length;E<f.length;E+=1)g(E);ae()}S[0]&40&&(i=b[35].paginate.filter(b[19]).length>0),i?c?(c.p(Je(b),S),S[0]&40&&V(c,1)):(c=bt(Je(b)),c.c(),V(c,1),c.m(l,n)):c&&(re(),F(c,1,1,()=>{c=null}),ae()),b[35].paginate.length<b[35].new.length?v?v.p(b,S):(v=kt(b),v.c(),v.m(l,null)):v&&(v.d(1),v=null)},i(b){if(!a){for(let S=0;S<d.length;S+=1)V(f[S]);V(c),a=!0}},o(b){f=f.filter(Boolean);for(let S=0;S<f.length;S+=1)F(f[S]);F(c),a=!1},d(b){b&&h(e),Le(f,b),c&&c.d(),v&&v.d(),s[24](null),b&&h(r),o=!1,ye(u)}}}function pt(s){let e,l;return e=new Bt({props:{site:s[3].publicSite,essaysItems:s[2],category:s[40].key,data:s[41],newData:s[35].new,dataLen:s[39],index:s[37],entities:s[9],updatePosition:s[0],batchSize:s[10],defaultNodes:[...s[11]],loadData:s[12]}}),{c(){pe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,i){be(e,t,i),l=!0},p(t,i){const n={};i[0]&8&&(n.site=t[3].publicSite),i[0]&4&&(n.essaysItems=t[2]),i[0]&8&&(n.category=t[40].key),i[0]&40&&(n.data=t[41]),i[0]&32&&(n.newData=t[35].new),i[0]&40&&(n.dataLen=t[39]),i[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ve(e,t)}}}function gt(s){let e,l,t=s[41].length>0&&pt(s);return{c(){t&&t.c(),e=z()},l(i){t&&t.l(i),e=z()},m(i,n){t&&t.m(i,n),w(i,e,n),l=!0},p(i,n){i[41].length>0?t?(t.p(i,n),n[0]&40&&V(t,1)):(t=pt(i),t.c(),V(t,1),t.m(e.parentNode,e)):t&&(re(),F(t,1,1,()=>{t=null}),ae())},i(i){l||(V(t),l=!0)},o(i){F(t),l=!1},d(i){t&&t.d(i),i&&h(e)}}}function bt(s){let e,l,t=s[38].length>0&&vt(s);return{c(){t&&t.c(),e=z()},l(i){t&&t.l(i),e=z()},m(i,n){t&&t.m(i,n),w(i,e,n),l=!0},p(i,n){i[38].length>0?t?(t.p(i,n),n[0]&40&&V(t,1)):(t=vt(i),t.c(),V(t,1),t.m(e.parentNode,e)):t&&(re(),F(t,1,1,()=>{t=null}),ae())},i(i){l||(V(t),l=!0)},o(i){F(t),l=!1},d(i){t&&t.d(i),i&&h(e)}}}function vt(s){let e,l;return e=new Bt({props:{site:s[3].publicSite,essaysItems:s[2],category:"",data:s[38],newData:s[35].new,dataLen:s[39],index:s[37],entities:s[9],updatePosition:s[0],batchSize:s[10],defaultNodes:[...s[11]],loadData:s[12]}}),{c(){pe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,i){be(e,t,i),l=!0},p(t,i){const n={};i[0]&8&&(n.site=t[3].publicSite),i[0]&4&&(n.essaysItems=t[2]),i[0]&40&&(n.data=t[38]),i[0]&32&&(n.newData=t[35].new),i[0]&40&&(n.dataLen=t[39]),i[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ve(e,t)}}}function kt(s){let e,l,t,i;function n(){return s[22](s[37])}function r(){return s[23](s[37])}return{c(){e=N("div"),l=Z("Load more"),this.h()},l(a){e=A(a,"DIV",{class:!0});var o=j(e);l=K(o,"Load more"),o.forEach(h),this.h()},h(){p(e,"class","more svelte-4h2tw7")},m(a,o){w(a,e,o),O(e,l),t||(i=[Y(e,"click",n),Y(e,"keydown",r)],t=!0)},p(a,o){s=a},d(a){a&&h(e),t=!1,ye(i)}}}function yt(s){var i,n;let e,l,t=((i=s[35])==null?void 0:i.new)&&((n=s[35])==null?void 0:n.new.length)>0&&mt(s);return{c(){t&&t.c(),e=z()},l(r){t&&t.l(r),e=z()},m(r,a){t&&t.m(r,a),w(r,e,a),l=!0},p(r,a){var o,u;(o=r[35])!=null&&o.new&&((u=r[35])==null?void 0:u.new.length)>0?t?(t.p(r,a),a[0]&32&&V(t,1)):(t=mt(r),t.c(),V(t,1),t.m(e.parentNode,e)):t&&(re(),F(t,1,1,()=>{t=null}),ae())},i(r){l||(V(t),l=!0)},o(r){F(t),l=!1},d(r){t&&t.d(r),r&&h(e)}}}function It(s){let e,l,t,i;return{c(){e=N("div"),l=Z("✕"),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=j(e);l=K(r,"✕"),r.forEach(h),this.h()},h(){p(e,"class","close svelte-4h2tw7")},m(n,r){w(n,e,r),O(e,l),t||(i=[Y(e,"click",s[29]),Y(e,"keypress",s[30])],t=!0)},p:R,d(n){n&&h(e),t=!1,ye(i)}}}function zl(s){let e,l,t,i,n,r;const a=[ql,Vl],o=[];function u(f,g){return f[8].length==0?0:1}l=u(s),t=o[l]=a[l](s);let d=s[5].length>1&&It(s);return{c(){e=N("div"),t.c(),i=X(),d&&d.c(),n=z(),this.h()},l(f){e=A(f,"DIV",{class:!0});var g=j(e);t.l(g),g.forEach(h),i=H(f),d&&d.l(f),n=z(),this.h()},h(){p(e,"class","graph svelte-4h2tw7")},m(f,g){w(f,e,g),o[l].m(e,null),s[28](e),w(f,i,g),d&&d.m(f,g),w(f,n,g),r=!0},p(f,g){let c=l;l=u(f),l===c?o[l].p(f,g):(re(),F(o[c],1,1,()=>{o[c]=null}),ae(),t=o[l],t?t.p(f,g):(t=o[l]=a[l](f),t.c()),V(t,1),t.m(e,null)),f[5].length>1?d?d.p(f,g):(d=It(f),d.c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null)},i(f){r||(V(t),r=!0)},o(f){F(t),r=!1},d(f){f&&h(e),o[l].d(),s[28](null),f&&h(i),d&&d.d(f),f&&h(n)}}}function Fl(s,e,l){const t=l-e;return(s-e)/t*100}function Gl(s,e,l){const t=l-e;return e+t*s/100}function Bl(s,e,l){let t,i,n,r,a;Q(s,Te,I=>l(32,i=I)),Q(s,de,I=>l(5,n=I)),Q(s,Be,I=>l(33,r=I));let{updatePosition:o}=e,{handlePosition:u}=e,{data:d}=e,{visibleItemsID:f}=e,{essaysItems:g}=e,{config:c}=e,{items:v}=e,{screenSize:b}=e,S;const E=me([]);Q(s,E,I=>l(8,a=I));let M=c.batch,_,y=d.nodes.filter(I=>f.includes(I.id));Ge(async()=>{P(d.nodes,M)}),jt(()=>{_.lastElementChild&&b>600&&_.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),u()});async function P(I,G){const fe=I.map(ee=>ee.id||(ee==null?void 0:ee.target)),ce=Math.ceil(fe.length/G);for(let ee=0;ee<ce;ee++){fe.slice(ee*G,(ee+1)*G);let ke=r.filter(ue=>fe.includes(ue["@id"])||I.includes(ue["@id"]));E.update(ue=>(ue.includes(...ke)||ue.push(...ke),ue))}}let m;const k=(I,G)=>{var fe,ce,ee,ke,ue;if(G!=null){const ie=((fe=n[I])==null?void 0:fe.page)+1||0;x(de,n[I]={...n[I],page:ie,paginate:(ce=n[I])==null?void 0:ce.data.slice(0,ie*M)},n),(ee=n[I])!=null&&ee.data&&((ke=n[I])==null?void 0:ke.paginate.length)!=((ue=n[I])==null?void 0:ue.data.length)&&P(n[I].paginate.slice(-M),M)}};let L=0;function B(I){var G,fe,ce,ee,ke,ue;if(i){const ie=document.querySelectorAll(".links:first-of-type .node");let We=(G=ie==null?void 0:ie[L])==null?void 0:G.offsetTop,Wt=(fe=ie==null?void 0:ie[L])==null?void 0:fe.getAttribute("data-id"),Xe=(ce=ie==null?void 0:ie[L+1])==null?void 0:ce.offsetTop,Xt=(ee=ie==null?void 0:ie[L+1])==null?void 0:ee.getAttribute("data-id"),Ht=(ke=document.querySelector(`.node-highlite[data-id="${Wt}"]`))==null?void 0:ke.offsetTop,Yt=(ue=document.querySelector(`.node-highlite[data-id="${Xt}"]`))==null?void 0:ue.offsetTop,Ut=Fl(I,We,Xe),He=Gl(Ut,Ht,Yt);const Ne=document.querySelector(".markdown__container");I>Xe&&L++,I<We&&L!=0&&L--,Ne&&He&&We!==Xe&&He>0&&(Ne==null||Ne.scrollTo({top:He}))}}const W=I=>!c.mainCategories.some(G=>G.props.includes(I.property)),U=(I,G)=>I.props.includes(G.property),T=(I,G)=>I.props.includes(G.property),J=I=>k(I,m),ne=I=>k(I,m);function C(I){Ee[I?"unshift":"push"](()=>{m=I,l(7,m)})}const se=()=>{let I=document.querySelector("#col_0");I.addEventListener("scroll",G=>{l(4,S=I==null?void 0:I.scrollTop)}),u()},te=()=>{u()},D=()=>{u()};function q(I){Ee[I?"unshift":"push"](()=>{_=I,l(6,_)})}const $=()=>{x(de,n=[],n),u()},oe=()=>{x(de,n=[],n)};return s.$$set=I=>{"updatePosition"in I&&l(0,o=I.updatePosition),"handlePosition"in I&&l(1,u=I.handlePosition),"data"in I&&l(14,d=I.data),"visibleItemsID"in I&&l(15,f=I.visibleItemsID),"essaysItems"in I&&l(2,g=I.essaysItems),"config"in I&&l(3,c=I.config),"items"in I&&l(16,v=I.items),"screenSize"in I&&l(17,b=I.screenSize)},s.$$.update=()=>{var I;s.$$.dirty[0]&65544&&l(18,t=v.filter(G=>G==null?void 0:G.data).map(G=>{var fe,ce,ee;return{img:Fe(G.data,c.paths.img.join(".")),source:`item_${G.id}`,target:(fe=G.data)==null?void 0:fe["@id"],title:((ce=G.data)==null?void 0:ce[c.paths.title])||((ee=G.data)==null?void 0:ee["@id"])||""}})),s.$$.dirty[0]&262176&&(n&&n.length==0||de&&((I=n==null?void 0:n[0])==null?void 0:I.data.length)==0)&&x(de,n[0]={data:t,new:t,page:0,paginate:t},n),s.$$.dirty[0]&16&&B(S)},[o,u,g,c,S,n,_,m,a,E,M,y,P,k,d,f,v,b,t,W,U,T,J,ne,C,se,te,D,q,$,oe]}class Wl extends Pe{constructor(e){super(),Se(this,e,Bl,zl,De,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function wt(s,e,l){const t=s.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function Et(s,e,l){const t=s.slice();return t[6]=e[l],t}function Pt(s){let e,l,t=Object.entries(s[0]),i=[];for(let n=0;n<t.length;n+=1)i[n]=Ot(wt(s,t,n));return{c(){e=Ie("svg"),l=Ie("g");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=we(n,"svg",{class:!0});var r=j(e);l=we(r,"g",{});var a=j(l);for(let o=0;o<i.length;o+=1)i[o].l(a);a.forEach(h),r.forEach(h),this.h()},h(){p(e,"class","svelte-1ijue24")},m(n,r){w(n,e,r),O(e,l);for(let a=0;a<i.length;a+=1)i[a].m(l,null)},p(n,r){if(r&3){t=Object.entries(n[0]);let a;for(a=0;a<t.length;a+=1){const o=wt(n,t,a);i[a]?i[a].p(o,r):(i[a]=Ot(o),i[a].c(),i[a].m(l,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(n){n&&h(e),Le(i,n)}}}function St(s){let e,l,t=s[6].label+"",i,n,r,a,o,u,d,f,g=s[6].label+"",c,v,b,S,E,M,_=s[6].reverse&&s[6].label&&Dt(),y=!s[6].reverse&&s[6].label&&Tt(),P=s[6].reverse&&s[6].label&&Lt(),m=!s[6].reverse&&s[6].label&&Nt();return{c(){e=Ie("text"),l=Ie("textPath"),i=Z(t),_&&_.c(),n=z(),y&&y.c(),d=Ie("text"),f=Ie("textPath"),c=Z(g),P&&P.c(),v=z(),m&&m.c(),this.h()},l(k){e=we(k,"text",{class:!0,source:!0,target:!0});var L=j(e);l=we(L,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var B=j(l);i=K(B,t),_&&_.l(B),n=z(),y&&y.l(B),B.forEach(h),L.forEach(h),d=we(k,"text",{class:!0,source:!0,target:!0});var W=j(d);f=we(W,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var U=j(f);c=K(U,g),P&&P.l(U),v=z(),m&&m.l(U),U.forEach(h),W.forEach(h),this.h()},h(){p(l,"alignment-baseline","middle"),p(l,"href",r="#path_"+s[2]),p(l,"startOffset","99%"),p(l,"text-anchor","end"),p(e,"class",a="background "+s[6].class+" svelte-1ijue24"),p(e,"source",o=s[6].datum.source),p(e,"target",u=s[6].datum.target),p(f,"alignment-baseline","middle"),p(f,"href",b="#path_"+s[2]),p(f,"startOffset","99%"),p(f,"text-anchor","end"),p(d,"class",S=qe(s[6].class)+" svelte-1ijue24"),p(d,"source",E=s[6].datum.source),p(d,"target",M=s[6].datum.target)},m(k,L){w(k,e,L),O(e,l),O(l,i),_&&_.m(l,null),O(l,n),y&&y.m(l,null),w(k,d,L),O(d,f),O(f,c),P&&P.m(f,null),O(f,v),m&&m.m(f,null)},p(k,L){L&1&&t!==(t=k[6].label+"")&&he(i,t),k[6].reverse&&k[6].label?_||(_=Dt(),_.c(),_.m(l,n)):_&&(_.d(1),_=null),!k[6].reverse&&k[6].label?y||(y=Tt(),y.c(),y.m(l,null)):y&&(y.d(1),y=null),L&1&&r!==(r="#path_"+k[2])&&p(l,"href",r),L&1&&a!==(a="background "+k[6].class+" svelte-1ijue24")&&p(e,"class",a),L&1&&o!==(o=k[6].datum.source)&&p(e,"source",o),L&1&&u!==(u=k[6].datum.target)&&p(e,"target",u),L&1&&g!==(g=k[6].label+"")&&he(c,g),k[6].reverse&&k[6].label?P||(P=Lt(),P.c(),P.m(f,v)):P&&(P.d(1),P=null),!k[6].reverse&&k[6].label?m||(m=Nt(),m.c(),m.m(f,null)):m&&(m.d(1),m=null),L&1&&b!==(b="#path_"+k[2])&&p(f,"href",b),L&1&&S!==(S=qe(k[6].class)+" svelte-1ijue24")&&p(d,"class",S),L&1&&E!==(E=k[6].datum.source)&&p(d,"source",E),L&1&&M!==(M=k[6].datum.target)&&p(d,"target",M)},d(k){k&&h(e),_&&_.d(),y&&y.d(),k&&h(d),P&&P.d(),m&&m.d()}}}function Dt(s){let e;return{c(){e=Z(" -")},l(l){e=K(l," -")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Tt(s){let e;return{c(){e=Z("→")},l(l){e=K(l,"→")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Lt(s){let e;return{c(){e=Z("←")},l(l){e=K(l,"←")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Nt(s){let e;return{c(){e=Z("→")},l(l){e=K(l,"→")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function At(s){let e,l,t,i,n,r,a=(s[1]==s[6].datum.source&&s[6].selected!="not-selected"||s[1]==s[6].datum.target)&&St(s);return{c(){e=Ie("path"),a&&a.c(),r=z(),this.h()},l(o){e=we(o,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),j(e).forEach(h),a&&a.l(o),r=z(),this.h()},h(){p(e,"id",l="path_"+s[2]),p(e,"class",t=qe(s[6].class)+" svelte-1ijue24"),p(e,"data-attr",i=s[6].selected),p(e,"d",n=s[6].d)},m(o,u){w(o,e,u),a&&a.m(o,u),w(o,r,u)},p(o,u){u&1&&l!==(l="path_"+o[2])&&p(e,"id",l),u&1&&t!==(t=qe(o[6].class)+" svelte-1ijue24")&&p(e,"class",t),u&1&&i!==(i=o[6].selected)&&p(e,"data-attr",i),u&1&&n!==(n=o[6].d)&&p(e,"d",n),o[1]==o[6].datum.source&&o[6].selected!="not-selected"||o[1]==o[6].datum.target?a?a.p(o,u):(a=St(o),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(o){o&&h(e),a&&a.d(o),o&&h(r)}}}function Ot(s){let e,l=s[3],t=[];for(let i=0;i<l.length;i+=1)t[i]=At(Et(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=z()},l(i){for(let n=0;n<t.length;n+=1)t[n].l(i);e=z()},m(i,n){for(let r=0;r<t.length;r+=1)t[r].m(i,n);w(i,e,n)},p(i,n){if(n&3){l=i[3];let r;for(r=0;r<l.length;r+=1){const a=Et(i,l,r);t[r]?t[r].p(a,n):(t[r]=At(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){Le(t,i),i&&h(e)}}}function Xl(s){let e=Object.keys(s[0]).length>0,l,t=e&&Pt(s);return{c(){t&&t.c(),l=z()},l(i){t&&t.l(i),l=z()},m(i,n){t&&t.m(i,n),w(i,l,n)},p(i,[n]){n&1&&(e=Object.keys(i[0]).length>0),e?t?t.p(i,n):(t=Pt(i),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:R,o:R,d(i){t&&t.d(i),i&&h(l)}}}function Hl(s,e,l){let t,i;return Q(s,je,n=>l(0,t=n)),Q(s,ze,n=>l(1,i=n)),[t,i]}class Yl extends Pe{constructor(e){super(),Se(this,e,Hl,Xl,De,{})}}function Ul(s){let e,l,t,i,n,r,a,o,u,d,f;return t=new dl({props:{data:s[11],items:s[3],scrollTopVal:s[7]}}),r=new Wl({props:{items:s[3],data:s[8],screenSize:s[0],essaysItems:s[5],visibleItemsID:s[4],handlePosition:s[13],updatePosition:s[12],config:xt}}),o=new Yl({}),{c(){e=N("article"),l=N("section"),pe(t.$$.fragment),i=X(),n=N("section"),pe(r.$$.fragment),a=X(),pe(o.$$.fragment),this.h()},l(g){e=A(g,"ARTICLE",{style:!0,class:!0});var c=j(e);l=A(c,"SECTION",{class:!0});var v=j(l);ge(t.$$.fragment,v),v.forEach(h),i=H(c),n=A(c,"SECTION",{class:!0});var b=j(n);ge(r.$$.fragment,b),b.forEach(h),a=H(c),ge(o.$$.fragment,c),c.forEach(h),this.h()},h(){var g;p(l,"class","markdown__container svelte-1umlmj5"),p(n,"class","graph__container svelte-1umlmj5"),Qt(e,"--theme-color",((g=s[11].meta)==null?void 0:g.color)||"blue"),p(e,"class","svelte-1umlmj5")},m(g,c){w(g,e,c),O(e,l),be(t,l,null),s[18](l),O(e,i),O(e,n),be(r,n,null),O(e,a),be(o,e,null),s[25](e),u=!0,d||(f=[Y(l,"wheel",s[19],{passive:!0}),Y(l,"scroll",s[20]),Y(n,"wheel",s[21],{passive:!0}),Y(e,"resize",s[13]),Y(e,"scroll",s[22]),Y(e,"touchmove",s[23],{passive:!0}),Y(e,"click",s[24]),Y(e,"keypress",s[16])],d=!0)},p(g,c){const v={};c&8&&(v.items=g[3]),c&128&&(v.scrollTopVal=g[7]),t.$set(v);const b={};c&8&&(b.items=g[3]),c&256&&(b.data=g[8]),c&1&&(b.screenSize=g[0]),c&32&&(b.essaysItems=g[5]),c&16&&(b.visibleItemsID=g[4]),r.$set(b)},i(g){u||(V(t.$$.fragment,g),V(r.$$.fragment,g),V(o.$$.fragment,g),u=!0)},o(g){F(t.$$.fragment,g),F(r.$$.fragment,g),F(o.$$.fragment,g),u=!1},d(g){g&&h(e),ve(t),s[18](null),ve(r),ve(o),s[25](null),d=!1,ye(f)}}}function Jl(s){let e,l,t,i;return{c(){e=N("article"),l=N("section"),t=N("h4"),i=Z("Loading..."),this.h()},l(n){e=A(n,"ARTICLE",{class:!0});var r=j(e);l=A(r,"SECTION",{class:!0});var a=j(l);t=A(a,"H4",{});var o=j(t);i=K(o,"Loading..."),o.forEach(h),a.forEach(h),r.forEach(h),this.h()},h(){p(l,"class","short_text svelte-1umlmj5"),p(e,"class","svelte-1umlmj5")},m(n,r){w(n,e,r),O(e,l),O(l,t),O(t,i)},p:R,i:R,o:R,d(n){n&&h(e)}}}function Zl(s){let e,l,t,i;return{c(){e=N("article"),l=N("section"),t=N("h4"),i=Z("404 Page not found"),this.h()},l(n){e=A(n,"ARTICLE",{class:!0});var r=j(e);l=A(r,"SECTION",{class:!0});var a=j(l);t=A(a,"H4",{});var o=j(t);i=K(o,"404 Page not found"),o.forEach(h),a.forEach(h),r.forEach(h),this.h()},h(){p(l,"class","short_text svelte-1umlmj5"),p(e,"class","svelte-1umlmj5")},m(n,r){w(n,e,r),O(e,l),O(l,t),O(t,i)},p:R,i:R,o:R,d(n){n&&h(e)}}}function Kl(s){var y,P;let e,l,t,i,n,r,a,o,u,d,f,g,c,v,b,S,E,M,_;return document.title=e=((P=(y=s[11])==null?void 0:y.meta)==null?void 0:P.title)||_e.title,{c(){l=X(),t=N("meta"),i=X(),n=N("meta"),r=X(),a=N("meta"),o=X(),u=N("meta"),d=X(),f=N("meta"),g=X(),c=N("meta"),v=X(),b=N("meta"),S=X(),E=N("meta"),M=X(),_=N("meta"),this.h()},l(m){l=H(m),t=A(m,"META",{name:!0,content:!0}),i=H(m),n=A(m,"META",{property:!0,content:!0}),r=H(m),a=A(m,"META",{property:!0,content:!0}),o=H(m),u=A(m,"META",{property:!0,content:!0}),d=H(m),f=A(m,"META",{name:!0,content:!0}),g=H(m),c=A(m,"META",{property:!0,content:!0}),v=H(m),b=A(m,"META",{name:!0,content:!0}),S=H(m),E=A(m,"META",{name:!0,content:!0}),M=H(m),_=A(m,"META",{name:!0,content:!0}),this.h()},h(){var m,k,L,B,W,U,T,J,ne,C,se,te,D,q,$,oe;p(t,"name","description"),p(t,"content",((k=(m=s[11])==null?void 0:m.meta)==null?void 0:k.description)||Ye),p(n,"property","og:url"),p(n,"content",le+((L=s[11])==null?void 0:L.path)||le+((B=s[11])==null?void 0:B.path)),p(a,"property","og:description"),p(a,"content",((U=(W=s[11])==null?void 0:W.meta)==null?void 0:U.description)||Ye),p(u,"property","og:image"),p(u,"content",((J=(T=s[11])==null?void 0:T.meta)==null?void 0:J.cover)||Re),p(f,"name","twitter:card"),p(f,"content","summary_large_image"),p(c,"property","twitter:url"),p(c,"content",le+((ne=s[11])==null?void 0:ne.path)||le+((C=s[11])==null?void 0:C.path)),p(b,"name","twitter:title"),p(b,"content",((te=(se=s[11])==null?void 0:se.meta)==null?void 0:te.title)||_e.title),p(E,"name","twitter:description"),p(E,"content",((q=(D=s[11])==null?void 0:D.meta)==null?void 0:q.description)||Ye),p(_,"name","twitter:image"),p(_,"content",((oe=($=s[11])==null?void 0:$.meta)==null?void 0:oe.cover)||Re)},m(m,k){w(m,l,k),w(m,t,k),w(m,i,k),w(m,n,k),w(m,r,k),w(m,a,k),w(m,o,k),w(m,u,k),w(m,d,k),w(m,f,k),w(m,g,k),w(m,c,k),w(m,v,k),w(m,b,k),w(m,S,k),w(m,E,k),w(m,M,k),w(m,_,k)},p(m,k){var L,B;k&2048&&e!==(e=((B=(L=m[11])==null?void 0:L.meta)==null?void 0:B.title)||_e.title)&&(document.title=e)},d(m){m&&h(l),m&&h(t),m&&h(i),m&&h(n),m&&h(r),m&&h(a),m&&h(o),m&&h(u),m&&h(d),m&&h(f),m&&h(g),m&&h(c),m&&h(v),m&&h(b),m&&h(S),m&&h(E),m&&h(M),m&&h(_)}}}function Ql(s){let e,l,t,i,n,r,a,o;Zt(s[17]);const u=[Zl,Jl,Ul],d=[];function f(c,v){return c[11]==null&&c[2]==null?0:c[2]==null?1:2}l=f(s),t=d[l]=u[l](s);let g=s[11]!=null&&Kl(s);return{c(){e=N("div"),t.c(),i=X(),g&&g.c(),n=z()},l(c){e=A(c,"DIV",{});var v=j(e);t.l(v),v.forEach(h),i=H(c);const b=Kt("svelte-a4gtco",document.head);g&&g.l(b),n=z(),b.forEach(h)},m(c,v){w(c,e,v),d[l].m(e,null),w(c,i,v),g&&g.m(document.head,null),O(document.head,n),r=!0,a||(o=[Y(window,"resize",s[13]),Y(window,"click",s[13]),Y(window,"resize",s[17])],a=!0)},p(c,[v]){let b=l;l=f(c),l===b?d[l].p(c,v):(re(),F(d[b],1,1,()=>{d[b]=null}),ae(),t=d[l],t?t.p(c,v):(t=d[l]=u[l](c),t.c()),V(t,1),t.m(e,null)),c[11]!=null&&g.p(c,v)},i(c){r||(V(t),r=!0)},o(c){F(t),r=!1},d(c){c&&h(e),d[l].d(),c&&h(i),g&&g.d(c),h(n),a=!1,ye(o)}}}function Rl(s,e,l){let t,i,n,r,a,o;Q(s,el,C=>l(26,t=C)),Q(s,Ue,C=>l(8,i=C)),Q(s,ze,C=>l(15,n=C)),Q(s,Me,C=>l(9,a=C)),Q(s,Te,C=>l(10,o=C));let{data:u}=e,d,f,g=[...u.posts].find(C=>C.path.includes(t.params.slug)),c,v,b=[],S=[],E,M;const _=me(!1);Q(s,_,C=>l(27,r=C));const y=()=>{x(_,r=!0,r)};Ge(async()=>{var te;await _l(),x(Ue,i=[],i);const C=Be.subscribe(async D=>{D.length>0&&(l(3,v=await pl(g.text,D)),l(4,b=v.filter(q=>!q.set).map(q=>{var $;return`${($=q.data)==null?void 0:$["@id"]}`})),l(2,c=await qt(v)),x(Ue,i=c,i))}),se=localStorage.getItem("selectedLanguage")||((te=$t)==null?void 0:te[0]);return l(5,S=u.posts.reduce((D,q)=>(!q.path.includes(t.params.slug)&&q.meta.lang==se&&q.links.map($=>{const oe=D.find(G=>G.id===$),I={title:q.meta.title,url:q.path};oe?oe.essays.some(G=>G.title===I.title&&G.url===I.url)||oe.essays.push(I):D.push({id:$,essays:[I]})}),D),[])),()=>C()});function P(C){Oe.call(this,s,C)}function m(){l(0,d=window.innerWidth)}function k(C){Ee[C?"unshift":"push"](()=>{f=C,l(1,f)})}const L=()=>{y(),x(Te,o=!1,o),l(7,M=f==null?void 0:f.scrollTop)},B=()=>{d<1e3&&(y(),l(7,M=f==null?void 0:f.scrollTop),x(Te,o=!1,o))},W=()=>{d>1e3&&x(Te,o=!0,o)},U=()=>{x(Me,a=E==null?void 0:E.scrollLeft,a)},T=()=>{x(Me,a=E==null?void 0:E.scrollLeft,a),y()},J=()=>{y()};function ne(C){Ee[C?"unshift":"push"](()=>{E=C,l(6,E)})}return s.$$set=C=>{"data"in C&&l(14,u=C.data)},s.$$.update=()=>{s.$$.dirty&32768&&y()},[d,f,c,v,b,S,E,M,i,a,o,g,_,y,u,n,P,m,k,L,B,W,U,T,J,ne]}class is extends Pe{constructor(e){super(),Se(this,e,Rl,Ql,De,{data:14})}}export{is as component,ss as universal};
